import{a as q,_ as E}from"./phone-XeyzPViJ.js";import{d as h,j as a,q as I,g as b,c as l,f as v,a as t,t as m,s as O,T as z,w as V,e as k,l as c,n as U,u as x,r as $,b as N,x as F,k as A,p as R,F as M,y as Z,z as B,A as D,v as L,R as T,B as j,i as G}from"./index-BDyQR78V.js";import{_ as w,A as H,f as J}from"./formatedTime-ZidU0IVD.js";const K={class:"modal-content"},Q={class:"modal-header"},X={class:"modal-body"},Y=h({__name:"ModalWindow",props:{show:{type:Boolean},title:{}},emits:["close"],setup(_,{emit:n}){const s=n;function e(){s("close")}return(o,r)=>(a(),I(z,{name:"fade"},{default:b(()=>[o.show?(a(),l("div",{key:0,class:"modal-overlay",onClick:V(e,["self"])},[v(z,{name:"slide"},{default:b(()=>[t("div",K,[t("div",Q,[t("h2",null,m(o.title),1),t("button",{onClick:e,class:"close-btn"},"×")]),t("div",X,[O(o.$slots,"default",{},void 0,!0)])])]),_:3})])):k("",!0)]),_:3}))}}),P=w(Y,[["__scopeId","data-v-1b0bf03f"]]),tt={class:"avatar-container"},et=h({__name:"AvatarWithStatus",props:{avatar:{},name:{},status:{}},setup(_){const n=_,s=c(()=>n.avatar),e=c(()=>n.name),o=c(()=>n.status);return(r,i)=>(a(),l("div",tt,[v(H,{name:e.value,avatar:s.value,class:"profile-avatar"},null,8,["name","avatar"]),t("span",{class:U(["status-dot",[o.value==="Online"?"online":o.value==="DoNotDisturb"?"dnd":"invisible"]])},null,2)]))}}),W=w(et,[["__scopeId","data-v-5886a8fc"]]),st={class:"user-profile-top"},nt={class:"user-info-top"},ot={class:"user-names"},at={class:"status-section"},it={class:"user-info"},lt={key:0},rt=h({__name:"UserProfile",setup(_){const n=x(),s=c(()=>n.currentUser),e=$(n.currentUser.selectedStatus);function o(){e.value&&n.setStatus(e.value)}return(r,i)=>(a(),l("div",st,[t("div",nt,[v(W,{avatar:s.value.avatar,name:s.value.identityName,status:s.value.selectedStatus},null,8,["avatar","name","status"]),t("div",ot,[t("h2",null,m(s.value.nickname)+" @"+m(s.value.identityName),1),t("div",at,[N(t("select",{"onUpdate:modelValue":i[0]||(i[0]=p=>e.value=p),onChange:i[1]||(i[1]=p=>o()),class:"status-select"},i[2]||(i[2]=[t("option",{value:"Online"},"Online",-1),t("option",{value:"DoNotDisturb"},"Don't disturb",-1),t("option",{value:"Invisible"},"Invisible",-1)]),544),[[F,e.value]])])])]),t("div",it,[t("p",null,[i[3]||(i[3]=t("strong",null,"Last change:",-1)),A(" "+m(R(J)(s.value.credentialsChangeDate)),1)]),t("p",null,[i[4]||(i[4]=t("strong",null,"Email:",-1)),A(" "+m(s.value.email),1)]),s.value.description?(a(),l("p",lt,[i[5]||(i[5]=t("strong",null,"About",-1)),A(" "+m(s.value.description),1)])):k("",!0)])]))}}),ct=w(rt,[["__scopeId","data-v-3963f1ab"]]),ut={};function dt(_,n){return null}const vt=w(ut,[["render",dt]]),mt={class:"logout-section"},_t=h({__name:"Logout",setup(_){const n=x();function s(){n.logout(),Z.push("/login")}return(e,o)=>(a(),l(M,null,[o[1]||(o[1]=t("p",null,[t("strong",null,"Do you want to log out of your account?")],-1)),t("div",null,[t("div",mt,[t("button",{class:"logout-button",onClick:o[0]||(o[0]=r=>s())},"Logout")])])],64))}}),pt=w(_t,[["__scopeId","data-v-12e857ec"]]),ft={class:"user-card"},ht={class:"settings-container"},Ct={class:"settings-menu"},gt=["onClick"],$t={class:"content-container"},wt={class:"settings-content"},yt=h({__name:"UserView",setup(_){const n=x();c(()=>n.currentUser);const s=["Profile","Settings","Logout"],e=$(s[0]);function o(r){e.value=r}return(r,i)=>(a(),l("div",ft,[t("div",ht,[t("aside",Ct,[t("ul",null,[(a(),l(M,null,B(s,(p,f)=>t("li",{key:f},[t("button",{class:U({active:e.value===p}),onClick:S=>o(p)},m(p),11,gt)])),64))])])]),t("div",$t,[t("main",wt,[e.value==="Profile"?(a(),I(ct,{key:0})):e.value==="Settings"?(a(),I(vt,{key:1})):e.value==="Logout"?(a(),I(pt,{key:2})):k("",!0)])])]))}}),bt=w(yt,[["__scopeId","data-v-327a5efd"]]),kt={class:"profile-widget"},St={class:"profile-info"},It={class:"username"},xt={class:"user-tag"},Ut=h({__name:"ProfileCard",setup(_){const n=x(),s=c(()=>n.currentUser.avatar),e=c(()=>n.currentUser.nickname),o=c(()=>n.currentUser.identityName),r=c(()=>n.currentUser.selectedStatus),i=$(!1);return(p,f)=>(a(),l("div",kt,[v(W,{avatar:s.value,name:e.value,status:r.value},null,8,["avatar","name","status"]),t("div",St,[t("div",It,m(e.value),1),t("div",xt,"@"+m(o.value),1)]),t("button",{class:"settings-button",onClick:f[0]||(f[0]=S=>i.value=!0)},f[2]||(f[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",class:"settings-icon"},[t("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.5-.03-.62.19l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.5.03.62-.19l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})],-1)])),v(P,{show:i.value,title:"User Environment",onClose:f[1]||(f[1]=S=>i.value=!1)},{default:b(()=>[v(bt)]),_:1},8,["show"])]))}}),Mt=w(Ut,[["__scopeId","data-v-a6920792"]]),At=["width","height"],Vt=["fill"],Nt=h({__name:"CreateIcon",props:{fillColor:{},size:{}},setup(_){return(n,s)=>(a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:n.size,height:n.size},[t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:n.fillColor},null,8,Vt)],8,At))}}),Bt={class:"sidebar-communities"},Pt={class:"community-list"},zt=["onClick"],Dt={class:"community-avatar"},Lt={class:"add-community-button"},Tt={key:0,class:"success-message"},Ht=h({__name:"CommunitySidebar",setup(_){const n=new T("https://dotflopp.ru/api"),s=D(),e=$(!1),o=$(""),r=$(""),i=c(()=>s.communities),p=c(()=>s.activeCommunityId);function f(y){s.setActiveCommunity(y)}async function S(){if(o.value.trim())try{const y=await n.createNewCommunities(o.value);s.addCommunity(y),r.value="Сообщество успешно создано!"}catch(y){console.error("Ошибка при создании сообщества:",y),r.value="Не удалось создать сообщество."}}return(y,C)=>(a(),l("div",Bt,[t("ul",Pt,[(a(!0),l(M,null,B(i.value,u=>(a(),l("li",{key:u.id,class:U(["community-item",{active:u.id===p.value}]),onClick:d=>f(u.id)},[t("div",Dt,[u.avatar?k("",!0):(a(),I(H,{key:0,name:u.name,avatar:u.avatar},null,8,["name","avatar"]))])],10,zt))),128))]),t("div",Lt,[t("button",{class:"add-btn",onClick:C[0]||(C[0]=u=>e.value=!0)},[v(Nt,{fillColor:"white",size:"70%"})]),v(P,{show:e.value,title:"Creating Community",onClose:C[2]||(C[2]=u=>e.value=!1)},{default:b(()=>[t("form",{onSubmit:V(S,["prevent"]),class:"community-form"},[N(t("input",{id:"community-name","onUpdate:modelValue":C[1]||(C[1]=u=>o.value=u),type:"text",placeholder:"community name",required:""},null,512),[[L,o.value]]),r.value?(a(),l("p",Tt,m(r.value),1)):k("",!0),C[3]||(C[3]=t("button",{type:"submit",class:"create-button"},"Create",-1))],32)]),_:1},8,["show"])])]))}}),Wt=w(Ht,[["__scopeId","data-v-fc60142f"]]),qt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},Et={"clip-path":"url(#clip0_2311_9433)"},Ot=["fill"],Ft=h({__name:"PersonIcon",props:{fillColor:{}},setup(_){return(n,s)=>(a(),l("svg",qt,[t("g",Et,[t("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V19C4 19.55 4.45 20 5 20H19C19.55 20 20 19.55 20 19V18C20 15.34 14.67 14 12 14Z",fill:n.fillColor},null,8,Ot)])]))}}),Rt={key:0,class:"sidebar-content"},Zt={class:"current-communities"},jt={class:"community-card"},Gt={class:"community-name"},Jt={key:0,class:"message"},Kt={class:"sidebar-channels"},Qt={class:"channel-list"},Xt=["onClick"],Yt={class:"channel-name"},te={class:"add-channel-button"},ee=h({__name:"ChannelSidebar",setup(_){const n=new T("https://dotflopp.ru/api"),s=D(),e=$(!1),o=$(""),r=$(""),i=c(()=>s.activeCommunityId),p=c(()=>i.value?s.getCommunityById(i.value):null),f=c(()=>s.channels),S=c(()=>s.activeChannelId);function y(u){s.setActiveChannel(u)}async function C(){if(o.value.trim())try{const d=`http://localhost:5173/invite/${(await n.createInvitation(s.getactiveCommunityId,o.value)).id}`;await navigator.clipboard.writeText(d),r.value="Invitation copied to clipboard"}catch(u){console.error("Ошибка при создании приглашения:",u),r.value="Не удалось создать приглашение."}}return(u,d)=>p.value?(a(),l("div",Rt,[t("div",Zt,[t("div",jt,[t("div",Gt,m(p.value.name),1),t("button",{class:"addPerson-btn",onClick:d[0]||(d[0]=g=>e.value=!0)},[v(Ft,{class:"addPerson",fillColor:"white"})]),v(P,{show:e.value,title:"Create Invitation",onClose:d[2]||(d[2]=g=>e.value=!1)},{default:b(()=>[t("form",{onSubmit:V(C,["prevent"]),class:"invitation-form"},[N(t("input",{id:"lifetime","onUpdate:modelValue":d[1]||(d[1]=g=>o.value=g),type:"text",placeholder:"Seconds",required:""},null,512),[[L,o.value]]),r.value?(a(),l("p",Jt,m(r.value),1)):k("",!0),d[4]||(d[4]=t("button",{type:"submit",class:"create-button"},"Create Invitation",-1))],32)]),_:1},8,["show"])])]),t("div",Kt,[t("ul",Qt,[(a(!0),l(M,null,B(f.value,g=>(a(),l("li",{key:g.id,class:U(["channel-item",{active:g.id===S.value}]),onClick:ve=>y(g.id)},[t("span",Yt,m(g.name),1)],10,Xt))),128))]),t("div",te,[t("button",{class:"add-btn",onClick:d[3]||(d[3]=g=>e.value=!0)},d[5]||(d[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24"},[t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})],-1)]))])])])):k("",!0)}}),se=w(ee,[["__scopeId","data-v-6fe5985e"]]),ne={class:"app-container"},oe={class:"sidebar"},ae={class:"main-content"},ie={class:"profile"},le={class:"main-content"},re={class:"top-bar"},ce={class:"call-icons"},ue={class:"call-icon",id:"phone-btn"},de={class:"call-icon",id:"camera-btn"},fe=h({__name:"MainPage",setup(_){const n=x();return c(()=>n.currentUser.avatar),c(()=>n.currentUser.nickname),(s,e)=>{const o=G("router-link");return a(),l("div",ne,[v(Wt),t("div",oe,[t("div",ae,[v(se)]),t("div",ie,[v(Mt)])]),t("main",le,[t("header",re,[e[2]||(e[2]=t("div",{class:"server-name"},"Chat",-1)),t("div",ce,[t("button",ue,[v(o,{to:"/rooms"},{default:b(()=>e[0]||(e[0]=[t("img",{src:q},null,-1)])),_:1})]),t("button",de,[v(o,{to:"/rooms"},{default:b(()=>e[1]||(e[1]=[t("img",{src:E},null,-1)])),_:1})])])]),e[3]||(e[3]=j('<section class="chat-area"><div class="message"><div class="avatar">U</div><div class="message-content"><div class="message-header"><span class="username">User1</span><span class="timestamp">10:30 AM</span></div><div class="message-body"> Hello, this is a sample message! </div></div></div><div class="message"><div class="avatar">V</div><div class="message-content"><div class="message-header"><span class="username">User2</span><span class="timestamp">10:31 AM</span></div><div class="message-body"> How are you doing? </div></div></div></section><footer class="message-input"><input type="text" placeholder="Type a message..."><button class="send-button">Send</button></footer>',2))])])}}});export{fe as default};
