import{d as y,j as l,q as x,g as S,c as r,f as c,a as t,t as f,s as Q,T as L,w as V,e as I,l as d,n as A,u as M,r as h,b as U,x as H,k as T,p as X,F as P,y as Y,z as B,A as q,v as z,R as F,i as tt,B as et}from"./index-B1-YJayX.js";import{_ as b,A as W,f as st}from"./formatedTime-CmfQ-e-a.js";import{a as nt,_ as at}from"./phone-XeyzPViJ.js";const ot={class:"modal-content"},lt={class:"modal-header"},it={class:"modal-body"},rt=y({__name:"ModalWindow",props:{show:{type:Boolean},title:{}},emits:["close"],setup(_,{emit:e}){const s=e;function a(){s("close")}return(o,u)=>(l(),x(L,{name:"fade"},{default:S(()=>[o.show?(l(),r("div",{key:0,class:"modal-overlay",onClick:V(a,["self"])},[c(L,{name:"slide"},{default:S(()=>[t("div",ot,[t("div",lt,[t("h2",null,f(o.title),1),t("button",{onClick:a,class:"close-btn"},"×")]),t("div",it,[Q(o.$slots,"default",{},void 0,!0)])])]),_:3})])):I("",!0)]),_:3}))}}),N=b(rt,[["__scopeId","data-v-1b0bf03f"]]),ct={class:"avatar-container"},ut=y({__name:"AvatarWithStatus",props:{avatar:{},name:{},status:{}},setup(_){const e=_,s=d(()=>e.avatar),a=d(()=>e.name),o=d(()=>e.status);return(u,i)=>(l(),r("div",ct,[c(W,{name:a.value,avatar:s.value,class:"profile-avatar"},null,8,["name","avatar"]),t("span",{class:A(["status-dot",[o.value==="Online"?"online":o.value==="DoNotDisturb"?"dnd":"invisible"]])},null,2)]))}}),E=b(ut,[["__scopeId","data-v-5886a8fc"]]),dt={class:"user-profile-top"},vt={class:"user-info-top"},mt={class:"user-names"},_t={class:"status-section"},pt={class:"user-info"},ht={key:0},ft=y({__name:"UserProfile",setup(_){const e=M(),s=d(()=>e.currentUser),a=h(e.currentUser.selectedStatus);function o(){a.value&&e.setStatus(a.value)}return(u,i)=>(l(),r("div",dt,[t("div",vt,[c(E,{avatar:s.value.avatar,name:s.value.identityName,status:s.value.selectedStatus},null,8,["avatar","name","status"]),t("div",mt,[t("h2",null,f(s.value.nickname)+" @"+f(s.value.identityName),1),t("div",_t,[U(t("select",{"onUpdate:modelValue":i[0]||(i[0]=p=>a.value=p),onChange:i[1]||(i[1]=p=>o()),class:"status-select"},i[2]||(i[2]=[t("option",{value:"Online"},"Online",-1),t("option",{value:"DoNotDisturb"},"Don't disturb",-1),t("option",{value:"Invisible"},"Invisible",-1)]),544),[[H,a.value]])])])]),t("div",pt,[t("p",null,[i[3]||(i[3]=t("strong",null,"Last change:",-1)),T(" "+f(X(st)(s.value.credentialsChangeDate)),1)]),t("p",null,[i[4]||(i[4]=t("strong",null,"Email:",-1)),T(" "+f(s.value.email),1)]),s.value.description?(l(),r("p",ht,[i[5]||(i[5]=t("strong",null,"About",-1)),T(" "+f(s.value.description),1)])):I("",!0)])]))}}),Ct=b(ft,[["__scopeId","data-v-3963f1ab"]]),gt={};function $t(_,e){return null}const yt=b(gt,[["render",$t]]),bt={class:"logout-section"},wt=y({__name:"Logout",setup(_){const e=M();function s(){e.logout(),Y.push("/login")}return(a,o)=>(l(),r(P,null,[o[1]||(o[1]=t("p",null,[t("strong",null,"Do you want to log out of your account?")],-1)),t("div",null,[t("div",bt,[t("button",{class:"logout-button",onClick:o[0]||(o[0]=u=>s())},"Logout")])])],64))}}),kt=b(wt,[["__scopeId","data-v-12e857ec"]]),It={class:"user-card"},St={class:"settings-container"},xt={class:"settings-menu"},Ut=["onClick"],Mt={class:"content-container"},Vt={class:"settings-content"},Nt=y({__name:"UserView",setup(_){const e=M();d(()=>e.currentUser);const s=["Profile","Settings","Logout"],a=h(s[0]);function o(u){a.value=u}return(u,i)=>(l(),r("div",It,[t("div",St,[t("aside",xt,[t("ul",null,[(l(),r(P,null,B(s,(p,v)=>t("li",{key:v},[t("button",{class:A({active:a.value===p}),onClick:k=>o(p)},f(p),11,Ut)])),64))])])]),t("div",Mt,[t("main",Vt,[a.value==="Profile"?(l(),x(Ct,{key:0})):a.value==="Settings"?(l(),x(yt,{key:1})):a.value==="Logout"?(l(),x(kt,{key:2})):I("",!0)])])]))}}),At=b(Nt,[["__scopeId","data-v-327a5efd"]]),Pt={class:"profile-widget"},Tt={class:"profile-info"},zt={class:"username"},Bt={class:"user-tag"},Dt=y({__name:"ProfileCard",setup(_){const e=M(),s=d(()=>e.currentUser.avatar),a=d(()=>e.currentUser.nickname),o=d(()=>e.currentUser.identityName),u=d(()=>e.currentUser.selectedStatus),i=h(!1);return(p,v)=>(l(),r("div",Pt,[c(E,{avatar:s.value,name:a.value,status:u.value},null,8,["avatar","name","status"]),t("div",Tt,[t("div",zt,f(a.value),1),t("div",Bt,"@"+f(o.value),1)]),t("button",{class:"settings-button",onClick:v[0]||(v[0]=k=>i.value=!0)},v[2]||(v[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",class:"settings-icon"},[t("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.5-.03-.62.19l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.5.03.62-.19l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})],-1)])),c(N,{show:i.value,title:"User Environment",onClose:v[1]||(v[1]=k=>i.value=!1)},{default:S(()=>[c(At)]),_:1},8,["show"])]))}}),Lt=b(Dt,[["__scopeId","data-v-a6920792"]]),Ht=["width","height"],qt=["fill"],O=y({__name:"CreateIcon",props:{fillColor:{},size:{}},setup(_){return(e,s)=>(l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:e.size,height:e.size},[t("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:e.fillColor},null,8,qt)],8,Ht))}}),Ft={class:"sidebar-communities"},Wt={class:"community-list"},Et=["onClick"],Ot={class:"community-avatar"},Rt={class:"add-community-button"},Zt={key:0,class:"success-message"},jt=y({__name:"CommunitySidebar",setup(_){const e=new F("https://dotflopp.ru/api"),s=q(),a=h(!1),o=h(""),u=h(""),i=d(()=>s.communities),p=d(()=>s.activeCommunityId);function v(w){s.setActiveCommunity(w)}async function k(){if(o.value.trim())try{const w=await e.createNewCommunities(o.value);s.addCommunity(w),u.value="Сообщество успешно создано!"}catch(w){console.error("Ошибка при создании сообщества:",w),u.value="Не удалось создать сообщество."}}return(w,g)=>(l(),r("div",Ft,[t("ul",Wt,[(l(!0),r(P,null,B(i.value,C=>(l(),r("li",{key:C.id,class:A(["community-item",{active:C.id===p.value}]),onClick:D=>v(C.id)},[t("div",Ot,[C.avatar?I("",!0):(l(),x(W,{key:0,name:C.name,avatar:C.avatar},null,8,["name","avatar"]))])],10,Et))),128))]),t("div",Rt,[t("button",{class:"add-btn",onClick:g[0]||(g[0]=C=>a.value=!0)},[c(O,{fillColor:"white",size:"70%"})]),c(N,{show:a.value,title:"Creating Community",onClose:g[2]||(g[2]=C=>a.value=!1)},{default:S(()=>[t("form",{onSubmit:V(k,["prevent"]),class:"community-form"},[U(t("input",{id:"community-name","onUpdate:modelValue":g[1]||(g[1]=C=>o.value=C),type:"text",placeholder:"community name",required:""},null,512),[[z,o.value]]),u.value?(l(),r("p",Zt,f(u.value),1)):I("",!0),g[3]||(g[3]=t("button",{type:"submit",class:"create-button"},"Create",-1))],32)]),_:1},8,["show"])])]))}}),Gt=b(jt,[["__scopeId","data-v-fc60142f"]]),Jt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},Kt={"clip-path":"url(#clip0_2311_9433)"},Qt=["fill"],Xt=y({__name:"PersonIcon",props:{fillColor:{}},setup(_){return(e,s)=>(l(),r("svg",Jt,[t("g",Kt,[t("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V19C4 19.55 4.45 20 5 20H19C19.55 20 20 19.55 20 19V18C20 15.34 14.67 14 12 14Z",fill:e.fillColor},null,8,Qt)])]))}}),Yt={key:0,class:"sidebar-content"},te={class:"current-communities"},ee={class:"community-card"},se={class:"community-name"},ne={key:0,class:"message"},ae={class:"sidebar-channels"},oe={class:"channel-list"},le=["onClick"],ie={class:"channel"},re={class:"channel-name"},ce=["onClick"],ue={class:"add-channel-button"},de={class:"channel-type"},ve={class:"status-section"},me={key:0,class:"message"},_e=y({__name:"ChannelSidebar",setup(_){const e=new F("https://dotflopp.ru/api"),s=q(),a=h(!1),o=h(""),u=h(""),i=h(!1),p=h(""),v=h("TextChannel"),k=h(""),w=d(()=>s.activeCommunityId),g=h("0"),C=d(()=>w.value?s.getCommunityById(w.value):null),D=d(()=>s.channels),R=d(()=>s.activeChannelId);function Z($){s.setActiveChannel($)}async function j(){if(o.value.trim())try{const n=`https://dotflopp.ru/invite/${(await e.createInvitation(s.getactiveCommunityId,o.value)).id}`;await navigator.clipboard.writeText(n),u.value="Invitation copied to clipboard"}catch($){console.error("Ошибка при создании приглашения:",$),u.value="Не удалось создать приглашение."}}async function G(){if(!(!p.value.trim()||v.value.length==0))try{const $={name:p.value,type:v.value,parentId:g.value},n=await e.createNewChannel(w.value,$);console.log(n),s.addChannel(n),k.value="Канал успешно создан!",g.value="0"}catch($){console.error("Ошибка при создании канала:",$),k.value="Не удалось создать канал."}}function J($){g.value=$}return($,n)=>C.value?(l(),r("div",Yt,[t("div",te,[t("div",ee,[t("div",se,f(C.value.name),1),t("button",{class:"addPerson-btn",onClick:n[0]||(n[0]=m=>a.value=!0)},[c(Xt,{class:"addPerson",fillColor:"white"})]),c(N,{show:a.value,title:"Create Invitation",onClose:n[2]||(n[2]=m=>a.value=!1)},{default:S(()=>[t("form",{onSubmit:V(j,["prevent"]),class:"invitation-form"},[U(t("input",{id:"lifetime","onUpdate:modelValue":n[1]||(n[1]=m=>o.value=m),type:"text",placeholder:"Seconds",required:""},null,512),[[z,o.value]]),u.value?(l(),r("p",ne,f(u.value),1)):I("",!0),n[7]||(n[7]=t("button",{type:"submit",class:"create-button"},"Create Invitation",-1))],32)]),_:1},8,["show"])])]),t("div",ae,[t("ul",oe,[(l(!0),r(P,null,B(D.value,m=>(l(),r("li",{key:m.id,class:A(["channel-item",{active:m.id===R.value}]),onClick:K=>Z(m.id)},[t("div",ie,[t("div",re,f(m.name),1),t("button",{class:"addChannel-btn-simple",onClick:K=>(i.value=!0,J(m.id))},[c(O,{fillColor:"white",size:"100%"})],8,ce)])],10,le))),128))]),t("div",ue,[t("button",{class:"addChannel-btn",onClick:n[3]||(n[3]=m=>i.value=!0)},n[8]||(n[8]=[t("p",null,"create channel",-1)]))]),c(N,{show:i.value,title:"Create channel",onClose:n[6]||(n[6]=m=>i.value=!1)},{default:S(()=>[t("form",{onSubmit:V(G,["prevent"]),class:"invitation-form"},[U(t("input",{id:"channelName","onUpdate:modelValue":n[4]||(n[4]=m=>p.value=m),type:"text",placeholder:"channel name",required:""},null,512),[[z,p.value]]),t("div",de,[n[10]||(n[10]=t("p",null,"Channel type",-1)),t("div",ve,[U(t("select",{"onUpdate:modelValue":n[5]||(n[5]=m=>v.value=m),class:"channeltype-select"},n[9]||(n[9]=[t("option",{value:"TextChannel"},"TextChannel",-1),t("option",{value:"ForkChannel"},"ForkChannel",-1),t("option",{value:"VoiceChannel"},"VoiceChannel",-1),t("option",{value:"CategoryChannel"},"CategoryChannel",-1)]),512),[[H,v.value]])])]),k.value?(l(),r("p",me,f(k.value),1)):I("",!0),n[11]||(n[11]=t("button",{type:"submit",class:"create-button"},"Create Channel",-1))],32)]),_:1},8,["show"])])])):I("",!0)}}),pe=b(_e,[["__scopeId","data-v-2d849382"]]),he={},fe={class:"top-bar"},Ce={class:"call-icons"},ge={class:"call-icon",id:"phone-btn"},$e={class:"call-icon",id:"camera-btn"};function ye(_,e){const s=tt("router-link");return l(),r("header",fe,[e[2]||(e[2]=t("div",{class:"server-name"},"Chat",-1)),t("div",Ce,[t("button",ge,[c(s,{to:"/rooms"},{default:S(()=>e[0]||(e[0]=[t("img",{src:nt},null,-1)])),_:1})]),t("button",$e,[c(s,{to:"/rooms"},{default:S(()=>e[1]||(e[1]=[t("img",{src:at},null,-1)])),_:1})])])])}const be=b(he,[["render",ye],["__scopeId","data-v-43526aa7"]]),we={};function ke(_,e){return e[0]||(e[0]=et('<section class="chat-area" data-v-59c94320><div class="message" data-v-59c94320><div class="avatar" data-v-59c94320>U</div><div class="message-content" data-v-59c94320><div class="message-header" data-v-59c94320><span class="username" data-v-59c94320>User1</span><span class="timestamp" data-v-59c94320>10:30 AM</span></div><div class="message-body" data-v-59c94320> Hello, this is a sample message! </div></div></div><div class="message" data-v-59c94320><div class="avatar" data-v-59c94320>V</div><div class="message-content" data-v-59c94320><div class="message-header" data-v-59c94320><span class="username" data-v-59c94320>User2</span><span class="timestamp" data-v-59c94320>10:31 AM</span></div><div class="message-body" data-v-59c94320> How are you doing? </div></div></div></section><footer class="message-input" data-v-59c94320><input type="text" placeholder="Type a message..." data-v-59c94320><button class="send-button" data-v-59c94320>Send</button></footer>',2))}const Ie=b(we,[["render",ke],["__scopeId","data-v-59c94320"]]),Se={class:"app-container"},xe={class:"sidebar"},Ue={class:"main-content"},Me={class:"profile"},Ve={class:"main-content"},Te=y({__name:"MainPage",setup(_){const e=M();return d(()=>e.currentUser.avatar),d(()=>e.currentUser.nickname),(s,a)=>(l(),r("div",Se,[c(Gt),t("div",xe,[t("div",Ue,[c(pe)]),t("div",Me,[c(Lt)])]),t("main",Ve,[c(be),c(Ie)])]))}});export{Te as default};
