import{d as y,j as n,q as V,g as x,c as l,f as _,a as e,t as g,s as ee,T as G,w as B,e as I,l as f,n as P,u as N,r as C,b as L,x as K,k as W,p as J,F as U,y as te,z,A as F,v as A,R as Z,i as se,o as Q,B as X,C as ne,D as oe,E as ae,G as le}from"./index-bjzBfnWe.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as E,f as ie,a as ce}from"./formatedTime-DRr_Wfls.js";import{a as re,_ as ue}from"./phone-XeyzPViJ.js";const de={class:"modal-content"},ve={class:"modal-header"},_e={class:"modal-body"},me=y({__name:"ModalWindow",props:{show:{type:Boolean},title:{}},emits:["close"],setup(m,{emit:t}){const s=t;function i(){s("close")}return(c,v)=>(n(),V(G,{name:"fade"},{default:x(()=>[c.show?(n(),l("div",{key:0,class:"modal-overlay",onClick:B(i,["self"])},[_(G,{name:"slide"},{default:x(()=>[e("div",de,[e("div",ve,[e("h2",null,g(c.title),1),e("button",{onClick:i,class:"close-btn"},"Ã—")]),e("div",_e,[ee(c.$slots,"default",{},void 0,!0)])])]),_:3})])):I("",!0)]),_:3}))}}),H=k(me,[["__scopeId","data-v-1b0bf03f"]]),pe={class:"avatar-container"},fe=y({__name:"AvatarWithStatus",props:{avatar:{},name:{},status:{}},setup(m){const t=m,s=f(()=>t.avatar),i=f(()=>t.name),c=f(()=>t.status);return(v,r)=>(n(),l("div",pe,[_(E,{name:i.value,avatar:s.value,class:"profile-avatar"},null,8,["name","avatar"]),e("span",{class:P(["status-dot",[c.value==="Online"?"online":c.value==="DoNotDisturb"?"dnd":"invisible"]])},null,2)]))}}),q=k(fe,[["__scopeId","data-v-b56f0ac9"]]),he={class:"user-profile-top"},Ce={class:"user-info-top"},ge={class:"avatar"},$e={class:"user-names"},we={class:"status-section"},ye={class:"user-info"},be={key:0},ke=y({__name:"UserProfile",setup(m){const t=N(),s=f(()=>t.currentUser),i=C(t.currentUser.selectedStatus);function c(){i.value&&t.setStatus(i.value)}return(v,r)=>(n(),l("div",he,[e("div",Ce,[e("div",ge,[_(q,{avatar:s.value.avatar,name:s.value.identityName,status:s.value.selectedStatus},null,8,["avatar","name","status"])]),e("div",$e,[e("h2",null,g(s.value.nickname)+" @"+g(s.value.identityName),1),e("div",we,[L(e("select",{"onUpdate:modelValue":r[0]||(r[0]=p=>i.value=p),onChange:r[1]||(r[1]=p=>c()),class:"status-select"},r[2]||(r[2]=[e("option",{value:"Online"},"Online",-1),e("option",{value:"DoNotDisturb"},"Don't disturb",-1),e("option",{value:"Invisible"},"Invisible",-1)]),544),[[K,i.value]])])])]),e("div",ye,[e("p",null,[r[3]||(r[3]=e("strong",null,"Last change:",-1)),W(" "+g(J(ie)(s.value.credentialsChangeDate)),1)]),e("p",null,[r[4]||(r[4]=e("strong",null,"Email:",-1)),W(" "+g(s.value.email),1)]),s.value.description?(n(),l("p",be,[r[5]||(r[5]=e("strong",null,"About",-1)),W(" "+g(s.value.description),1)])):I("",!0)])]))}}),Ie=k(ke,[["__scopeId","data-v-234c5043"]]),Me={};function Se(m,t){return null}const Ue=k(Me,[["render",Se]]),xe={class:"logout-section"},Ve=y({__name:"Logout",setup(m){const t=N();function s(){t.logout(),te.push("/login")}return(i,c)=>(n(),l(U,null,[c[1]||(c[1]=e("p",null,[e("strong",null,"Do you want to log out of your account?")],-1)),e("div",null,[e("div",xe,[e("button",{class:"logout-button",onClick:c[0]||(c[0]=v=>s())},"Logout")])])],64))}}),ze=k(Ve,[["__scopeId","data-v-12e857ec"]]),Le={class:"user-card"},Pe={class:"settings-container"},Te={class:"settings-menu"},Be=["onClick"],De={class:"content-container"},Ae={class:"settings-content"},He=y({__name:"UserView",setup(m){const t=N();f(()=>t.currentUser);const s=["Profile","Settings","Logout"],i=C(s[0]);function c(v){i.value=v}return(v,r)=>(n(),l("div",Le,[e("div",Pe,[e("aside",Te,[e("ul",null,[(n(),l(U,null,z(s,(p,o)=>e("li",{key:o},[e("button",{class:P({active:i.value===p}),onClick:d=>c(p)},g(p),11,Be)])),64))])])]),e("div",De,[e("main",Ae,[i.value==="Profile"?(n(),V(Ie,{key:0})):i.value==="Settings"?(n(),V(Ue,{key:1})):i.value==="Logout"?(n(),V(ze,{key:2})):I("",!0)])])]))}}),Ne=k(He,[["__scopeId","data-v-327a5efd"]]),Fe={class:"profile-widget"},Re={class:"avatar"},je={class:"profile-info"},Oe={class:"username"},We={class:"user-tag"},Ze=y({__name:"ProfileCard",setup(m){const t=N(),s=f(()=>t.currentUser.avatar),i=f(()=>t.currentUser.nickname),c=f(()=>t.currentUser.identityName),v=f(()=>t.currentUser.selectedStatus),r=C(!1);return(p,o)=>(n(),l("div",Fe,[e("div",Re,[_(q,{avatar:s.value,name:i.value,status:v.value},null,8,["avatar","name","status"])]),e("div",je,[e("div",Oe,g(i.value),1),e("div",We,"@"+g(c.value),1)]),e("button",{class:"settings-button",onClick:o[0]||(o[0]=d=>r.value=!0)},o[2]||(o[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",class:"settings-icon"},[e("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.5-.03-.62.19l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.5.03.62-.19l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})],-1)])),_(H,{show:r.value,title:"User Environment",onClose:o[1]||(o[1]=d=>r.value=!1)},{default:x(()=>[_(Ne)]),_:1},8,["show"])]))}}),Ee=k(Ze,[["__scopeId","data-v-77744551"]]),qe=["width","height"],Ge=["fill"],Y=y({__name:"CreateIcon",props:{fillColor:{},size:{}},setup(m){return(t,s)=>(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:t.size,height:t.size},[e("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z",fill:t.fillColor},null,8,Ge)],8,qe))}}),Ke={class:"sidebar-communities"},Je={class:"community-list"},Qe=["onClick"],Xe={class:"community-avatar"},Ye={class:"add-community-button"},et={key:0,class:"success-message"},tt=y({__name:"CommunitySidebar",setup(m){const t=new Z("https://dotflopp.ru/api"),s=F(),i=C(!1),c=C(""),v=C(""),r=f(()=>s.communities),p=f(()=>s.activeCommunityId);function o(u){s.setActiveCommunity(u)}async function d(){if(c.value.trim())try{const u=await t.createNewCommunities(c.value);s.addCommunity(u),v.value="Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð¾ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð¾!"}catch(u){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð°:",u),v.value="ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð¾."}}return(u,h)=>(n(),l("div",Ke,[e("ul",Je,[(n(!0),l(U,null,z(r.value,$=>(n(),l("li",{key:$.id,class:P(["community-item",{active:$.id===p.value}]),onClick:T=>o($.id)},[e("div",Xe,[$.avatar?I("",!0):(n(),V(E,{key:0,name:$.name,avatar:$.avatar},null,8,["name","avatar"]))])],10,Qe))),128))]),e("div",Ye,[e("button",{class:"add-btn",onClick:h[0]||(h[0]=$=>i.value=!0)},[_(Y,{fillColor:"white",size:"70%"})]),_(H,{show:i.value,title:"Creating Community",onClose:h[2]||(h[2]=$=>i.value=!1)},{default:x(()=>[e("form",{onSubmit:B(d,["prevent"]),class:"community-form"},[L(e("input",{id:"community-name","onUpdate:modelValue":h[1]||(h[1]=$=>c.value=$),type:"text",placeholder:"community name",required:""},null,512),[[A,c.value]]),v.value?(n(),l("p",et,g(v.value),1)):I("",!0),h[3]||(h[3]=e("button",{type:"submit",class:"create-button"},"Create",-1))],32)]),_:1},8,["show"])])]))}}),st=k(tt,[["__scopeId","data-v-fc60142f"]]),nt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"},ot={"clip-path":"url(#clip0_2311_9433)"},at=["fill"],lt=y({__name:"PersonIcon",props:{fillColor:{}},setup(m){return(t,s)=>(n(),l("svg",nt,[e("g",ot,[e("path",{d:"M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V19C4 19.55 4.45 20 5 20H19C19.55 20 20 19.55 20 19V18C20 15.34 14.67 14 12 14Z",fill:t.fillColor},null,8,at)])]))}}),it={key:0,class:"sidebar-content"},ct={class:"current-communities"},rt={class:"community-card"},ut={class:"community-name"},dt={key:0,class:"message"},vt={class:"sidebar-channels"},_t={class:"channel-list"},mt=["onClick"],pt={class:"channel"},ft={class:"channel-name"},ht=["onClick"],Ct={class:"add-channel-button"},gt={class:"channel-type"},$t={class:"status-section"},wt={key:0,class:"message"},yt=y({__name:"ChannelSidebar",setup(m){const t=new Z("https://dotflopp.ru/api"),s=F(),i=C(!1),c=C(""),v=C(""),r=C(!1),p=C(""),o=C("TextChannel"),d=C(""),u=f(()=>s.activeCommunityId),h=C("0"),$=f(()=>u.value?s.getCommunityById(u.value):null),T=f(()=>s.channels),R=f(()=>s.activeChannelId);function j(b){s.setActiveChannel(b)}async function O(){if(c.value.trim())try{const a=`https://dotflopp.ru/invite/${(await t.createInvitation(s.getactiveCommunityId,c.value)).id}`;await navigator.clipboard.writeText(a),v.value="Invitation copied to clipboard"}catch(b){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ñ:",b),v.value="ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ðµ."}}async function M(){if(!(!p.value.trim()||o.value.length==0))try{const b={name:p.value,type:o.value,parentId:h.value},a=await t.createNewChannel(u.value,b);console.log(a),s.addChannel(a),d.value="ÐšÐ°Ð½Ð°Ð» ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½!",h.value="0"}catch(b){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ ÐºÐ°Ð½Ð°Ð»Ð°:",b),d.value="ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÐºÐ°Ð½Ð°Ð»."}}function S(b){h.value=b}return(b,a)=>$.value?(n(),l("div",it,[e("div",ct,[e("div",rt,[e("div",ut,g($.value.name),1),e("button",{class:"addPerson-btn",onClick:a[0]||(a[0]=w=>i.value=!0)},[_(lt,{class:"addPerson",fillColor:"white"})]),_(H,{show:i.value,title:"Create Invitation",onClose:a[2]||(a[2]=w=>i.value=!1)},{default:x(()=>[e("form",{onSubmit:B(O,["prevent"]),class:"invitation-form"},[L(e("input",{id:"lifetime","onUpdate:modelValue":a[1]||(a[1]=w=>c.value=w),type:"text",placeholder:"Seconds",required:""},null,512),[[A,c.value]]),v.value?(n(),l("p",dt,g(v.value),1)):I("",!0),a[7]||(a[7]=e("button",{type:"submit",class:"create-button"},"Create Invitation",-1))],32)]),_:1},8,["show"])])]),e("div",vt,[e("ul",_t,[(n(!0),l(U,null,z(T.value,w=>(n(),l("li",{key:w.id,class:P(["channel-item",{active:w.id===R.value}]),onClick:D=>j(w.id)},[e("div",pt,[e("div",ft,g(w.name),1),e("button",{class:"addChannel-btn-simple",onClick:D=>(r.value=!0,S(w.id))},[_(Y,{fillColor:"white",size:"100%"})],8,ht)])],10,mt))),128))]),e("div",Ct,[e("button",{class:"addChannel-btn",onClick:a[3]||(a[3]=w=>r.value=!0)},a[8]||(a[8]=[e("p",null,"create channel",-1)]))]),_(H,{show:r.value,title:"Create channel",onClose:a[6]||(a[6]=w=>r.value=!1)},{default:x(()=>[e("form",{onSubmit:B(M,["prevent"]),class:"invitation-form"},[L(e("input",{id:"channelName","onUpdate:modelValue":a[4]||(a[4]=w=>p.value=w),type:"text",placeholder:"channel name",required:""},null,512),[[A,p.value]]),e("div",gt,[a[10]||(a[10]=e("p",null,"Channel type",-1)),e("div",$t,[L(e("select",{"onUpdate:modelValue":a[5]||(a[5]=w=>o.value=w),class:"channeltype-select"},a[9]||(a[9]=[e("option",{value:"TextChannel"},"TextChannel",-1),e("option",{value:"VoiceChannel"},"VoiceChannel",-1),e("option",{value:"CategoryChannel"},"CategoryChannel",-1)]),512),[[K,o.value]])])]),d.value?(n(),l("p",wt,g(d.value),1)):I("",!0),a[11]||(a[11]=e("button",{type:"submit",class:"create-button"},"Create Channel",-1))],32)]),_:1},8,["show"])])])):I("",!0)}}),bt=k(yt,[["__scopeId","data-v-19cc8aeb"]]),kt={},It={class:"top-bar"},Mt={class:"call-icons"},St={class:"call-icon",id:"phone-btn"},Ut={class:"call-icon",id:"camera-btn"};function xt(m,t){const s=se("router-link");return n(),l("header",It,[t[2]||(t[2]=e("div",{class:"server-name"},"Chat",-1)),e("div",Mt,[e("button",St,[_(s,{to:"/rooms"},{default:x(()=>t[0]||(t[0]=[e("img",{src:re},null,-1)])),_:1})]),e("button",Ut,[_(s,{to:"/rooms"},{default:x(()=>t[1]||(t[1]=[e("img",{src:ue},null,-1)])),_:1})])])])}const Vt=k(kt,[["render",xt],["__scopeId","data-v-75814ce4"]]),zt=["width","height"],Lt=["fill"],Pt=y({__name:"Ð¡lipIcon",props:{fillColor:{},size:{}},setup(m){return(t,s)=>(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",width:t.size,height:t.size},[e("path",{d:"M16.5 6.75015V17.3301C16.5 19.4201 14.97 21.2801 12.89 21.4801C10.5 21.7101 8.5 19.8401 8.5 17.5001V5.14015C8.5 3.83015 9.44 2.64015 10.74 2.51015C12.24 2.36015 13.5 3.53015 13.5 5.00015V15.5001C13.5 16.0501 13.05 16.5001 12.5 16.5001C11.95 16.5001 11.5 16.0501 11.5 15.5001V6.75015C11.5 6.34015 11.16 6.00015 10.75 6.00015C10.34 6.00015 10 6.34015 10 6.75015V15.3601C10 16.6701 10.94 17.8601 12.24 17.9901C13.74 18.1401 15 16.9701 15 15.5001V5.17015C15 3.08015 13.47 1.22015 11.39 1.02015C9.01 0.790146 7 2.66015 7 5.00015V17.2701C7 20.1401 9.1 22.7101 11.96 22.9801C15.25 23.2801 18 20.7201 18 17.5001V6.75015C18 6.34015 17.66 6.00015 17.25 6.00015C16.84 6.00015 16.5 6.34015 16.5 6.75015Z",fill:t.fillColor},null,8,Lt)],8,zt))}}),Tt={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bt={"clip-path":"url(#clip0_2311_5181)"},Dt=["fill"],At=y({__name:"DeleteIcon",props:{fillColor:{}},setup(m){return(t,s)=>(n(),l("svg",Tt,[e("g",Bt,[e("path",{d:"M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V9C18 7.9 17.1 7 16 7H8C6.9 7 6 7.9 6 9V19ZM18 4H15.5L14.79 3.29C14.61 3.11 14.35 3 14.09 3H9.91C9.65 3 9.39 3.11 9.21 3.29L8.5 4H6C5.45 4 5 4.45 5 5C5 5.55 5.45 6 6 6H18C18.55 6 19 5.55 19 5C19 4.45 18.55 4 18 4Z",fill:t.fillColor},null,8,Dt)])]))}}),Ht={key:0,class:"image-wrapper"},Nt=["src"],Ft={key:1,class:"file-icon"},Rt={class:"filename"},jt=["onClick"],Ot=y({__name:"FilePreview",props:{files:{},direction:{},needCloseButton:{type:Boolean}},emits:["delete"],setup(m,{emit:t}){const s=m,i=t,c=f(()=>s.direction==="vertical");function v(o){return o.type.startsWith("image/")}function r(o){return URL.createObjectURL(o)}function p(o){i("delete",o)}return(o,d)=>(n(),l("div",{class:P(["file-preview-container",{"is-vertical":c.value}])},[(n(!0),l(U,null,z(o.files,(u,h)=>(n(),l("div",{key:h,class:"file-item"},[v(u)?(n(),l("div",Ht,[e("img",{src:r(u),class:"image-preview"},null,8,Nt)])):(n(),l("div",Ft,d[0]||(d[0]=[e("span",{class:"icon"},"ðŸ“„",-1)]))),e("div",Rt,g(u.name),1),o.needCloseButton?(n(),l("button",{key:2,class:"delete-button",onClick:$=>p(h)},[_(At,{class:"delete-icon","fill-color":"white",size:"50%"})],8,jt)):I("",!0)]))),128))],2))}}),Wt=k(Ot,[["__scopeId","data-v-609c527a"]]),Zt=["width","height"],Et=["fill"],qt=y({__name:"Download",props:{fillColor:{},size:{}},setup(m){return(t,s)=>(n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:t.size,height:t.size},[e("path",{d:"M11.59 6H10V1C10 0.45 9.55 0 9 0H5C4.45 0 4 0.45 4 1V6H2.41C1.52 6 1.07 7.08 1.7 7.71L6.29 12.3C6.68 12.69 7.31 12.69 7.7 12.3L12.29 7.71C12.92 7.08 12.48 6 11.59 6ZM0 16C0 16.55 0.45 17 1 17H13C13.55 17 14 16.55 14 16C14 15.45 13.55 15 13 15H1C0.45 15 0 15.45 0 16Z",fill:t.fillColor},null,8,Et)],8,Zt))}}),Gt={key:0,class:"image-wrapper"},Kt=["src"],Jt={key:1,class:"file-icon"},Qt={class:"filename"},Xt=["onClick"],Yt=y({__name:"MessageFilePreview",props:{files:{},direction:{}},setup(m){const t=new Z("https://dotflopp.ru/api"),s=m,i=f(()=>s.direction==="vertical"),c=f(()=>s.files.map((o,d)=>{const u=r.value[d];return{...o,previewUrl:u?URL.createObjectURL(u):null,name:u?u.name:o.id}}));function v(o){return o.mediaType.startsWith("image/")}const r=C([]);function p(o){const d=r.value[o];if(!d)return;const u=document.createElement("a");u.href=URL.createObjectURL(d),u.download=d.name,document.body.appendChild(u),u.click(),document.body.removeChild(u)}return Q(async()=>{if(!s.files||s.files.length===0)return;const o=s.files.map(d=>t.getFileAttachment(d.sourceUrl));try{const d=await Promise.all(o);r.value=d}catch(d){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð¾Ð²:",d)}}),X(()=>{if(r.value.length>0)for(const o of r.value)URL.revokeObjectURL(o)}),(o,d)=>(n(),l("div",{class:P(["file-preview-container",{"is-vertical":i.value}])},[(n(!0),l(U,null,z(c.value,(u,h)=>(n(),l("div",{key:u.id,class:"file-item"},[v(u)?(n(),l("div",Gt,[e("img",{src:u.previewUrl,class:"image-preview"},null,8,Kt)])):(n(),l("div",Jt,d[0]||(d[0]=[e("span",{class:"icon"},"ðŸ“„",-1)]))),e("div",Qt,g(u.name),1),e("button",{class:"download-button",onClick:$=>p(h)},[_(qt,{class:"download-icon","fill-color":"white",size:"60%"})],8,Xt)]))),128))],2))}}),es=k(Yt,[["__scopeId","data-v-4ea6c9f5"]]),ts={class:"message-avatars"},ss={class:"message-content"},ns={class:"message-header"},os={class:"username"},as={class:"timestamp"},ls={class:"message-body"},is={class:"files"},cs={class:"message-container"},rs={class:"file-preview"},us={class:"message-input"},ds=["onKeydown"],vs=y({__name:"Chat",setup(m){const t=ne(),s=F(),i=C([]),c=C(),v=f(()=>s.activeChannelId),r=f(()=>t.getMessages),p=f(()=>t.getUsers),o=C(null),d=C("");C();const u=oe("CGW");async function h(M){t.addMessage(M),await le(),T()}Q(async()=>{await t.fetchMessages(v.value),T(),u.on("MessageCreated",h)}),X(()=>{u.off("MessageCreated",h)});async function $(){try{await t.sendMessage(v.value,d.value,i.value),d.value="",i.value=[]}catch(M){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ:",M)}}function T(){o.value&&o.value.scrollTo({top:o.value.scrollHeight,behavior:"smooth"})}function R(){c.value&&c.value.click()}function j(M){console.log("ÐºÐ»Ð¸ÐºÐ°ÑŽ");const S=M.target;S.files&&S.files.length>0&&(i.value=[...i.value,...Array.from(S.files)])}function O(M){i.value.splice(M,1)}return(M,S)=>{var b;return n(),l(U,null,[e("section",{class:"chat-area",ref_key:"chatContainer",ref:o},[(n(!0),l(U,null,z(r.value,a=>{var w,D;return n(),l("div",{key:a.id,class:"message"},[e("div",ts,[_(E,{name:p.value[a.userId].nickname,avatar:p.value[a.userId].avatar},null,8,["name","avatar"])]),e("div",ss,[e("div",ns,[e("span",os,g((w=p.value[a.userId])==null?void 0:w.nickname),1),e("span",as,g(J(ce)(a.createdAt)),1)]),e("div",ls,g(a.text),1),e("div",is,[((D=a.attachments)==null?void 0:D.length)>0?(n(),V(es,{key:0,files:a.attachments,direction:"vertical","need-close-button":!1},null,8,["files"])):I("",!0)])])])}),128))],512),e("div",cs,[e("div",rs,[((b=i.value)==null?void 0:b.length)>0?(n(),V(Wt,{key:0,files:i.value,direction:"horizontal","need-close-button":!0,onDelete:O},null,8,["files"])):I("",!0)]),e("footer",us,[e("div",{class:"clipicon-wrapper",onClick:S[0]||(S[0]=a=>R())},[_(Pt,{"fill-color":"white",size:"55%",class:"clipicon"})]),e("input",{type:"file",accept:"image/*, .pdf, .txt",onChange:j,ref_key:"fileInput",ref:c,hidden:""},null,544),L(e("input",{type:"text",placeholder:"Type a message...","onUpdate:modelValue":S[1]||(S[1]=a=>d.value=a),onKeydown:ae(B($,["prevent"]),["enter"])},null,40,ds),[[A,d.value]]),e("button",{class:"send-button",onClick:$},"Send")])])],64)}}}),_s=k(vs,[["__scopeId","data-v-f1cadca3"]]),ms={class:"sidebar-users"},ps={class:"user-list"},fs={class:"user-avatar"},hs={class:"user-name"},Cs=y({__name:"MembersSidebar",setup(m){const t=F(),s=f(()=>t.getCommunityMembers);return(i,c)=>(n(),l("div",ms,[c[0]||(c[0]=e("div",{class:"top-bar"},null,-1)),e("ul",ps,[(n(!0),l(U,null,z(s.value,v=>(n(),l("li",{key:v.userId,class:"user-item"},[e("div",fs,[_(q,{name:v.nickname,avatar:v.avatar,status:v.status},null,8,["name","avatar","status"])]),e("span",hs,g(v.nickname),1)]))),128))])]))}}),gs=k(Cs,[["__scopeId","data-v-18c0f87e"]]),$s={class:"app-container"},ws={class:"sidebar"},ys={class:"main-content"},bs={class:"profile"},ks={class:"main-content"},Is={class:"community-member"},Vs=y({__name:"MainPage",setup(m){return(t,s)=>(n(),l("div",$s,[_(st),e("div",ws,[e("div",ys,[_(bt)]),e("div",bs,[_(Ee)])]),e("main",ks,[_(Vt),_(_s)]),e("div",Is,[_(gs)])]))}});export{Vs as default};
