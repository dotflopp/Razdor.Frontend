import{d as h,m as g,u as A,r as l,l as m,o as k,c as i,a as t,f as w,t as a,e as x,h as C,j as r}from"./index-CNDI3ltj.js";import{A as S,f as v}from"./formatedTime-C-GXOXZp.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"accept-invite-page"},N={key:0,class:"invite-card"},V={class:"community-info"},b={class:"community-avatar"},U={class:"community-text"},j={key:0},D={class:"info-row"},F={class:"info-row"},J={class:"info-row"},M={class:"info-row"},R={key:1,class:"error-message"},T=h({__name:"AcceptInvitation",setup(W){const p=C(),s=g(),_=A(),u=l(!1),e=l(),d=l(null),f=m(()=>v(e.value.createdAt)),y=m(()=>v(e.value.expiresAt));k(async()=>{var n;const o=s.pendingInviteId;if(console.log(o),!o){u.value=!0;return}try{await s.fetchInviteInfo(o),e.value=s.getInvite,console.log(e.value),d.value=await _.getUserWithId((n=e.value)==null?void 0:n.creatorId)}catch{u.value=!0}});async function I(){try{await s.acceptInvite(e.value.id),p.push("/main")}catch(o){alert("Не удалось принять приглашение"),console.error(o)}}return(o,n)=>{var c;return r(),i("div",E,[e.value?(r(),i("div",N,[t("div",V,[t("div",b,[w(S,{avatar:e.value.community.avatar,name:e.value.community.name},null,8,["avatar","name"])]),t("div",U,[t("h2",null,a(e.value.community.name),1),e.value.community.description?(r(),i("p",j,a(e.value.community.description),1)):x("",!0)])]),t("div",D,[n[0]||(n[0]=t("span",null,"Creator",-1)),t("span",null,a((c=d.value)==null?void 0:c.nickname),1)]),t("div",F,[n[1]||(n[1]=t("span",null,"Created",-1)),t("span",null,a(f.value),1)]),t("div",J,[n[2]||(n[2]=t("span",null,"Expires",-1)),t("span",null,a(y.value),1)]),t("div",M,[n[3]||(n[3]=t("span",null,"Uses count",-1)),t("span",null,a(e.value.usesCount),1)]),t("button",{onClick:I},"Join the community")])):(r(),i("div",R," Failed to load invitation information "))])}}}),H=B(T,[["__scopeId","data-v-619e7bc8"]]);export{H as default};
