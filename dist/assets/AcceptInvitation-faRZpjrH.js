import{d as h,m as g,u as A,r as l,l as m,o as k,c as i,a as t,f as w,t as a,e as x,h as C,j as r}from"./index-BFyExB2T.js";import{A as S,a as v}from"./Avatar-BXAWUH6Y.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                               */const E={class:"accept-invite-page"},N={key:0,class:"invite-card"},V={class:"community-info"},b={class:"community-avatar"},U={class:"community-text"},j={key:0},D={class:"info-row"},F={class:"info-row"},J={class:"info-row"},M={class:"info-row"},R={key:1,class:"error-message"},T=h({__name:"AcceptInvitation",setup(W){const p=C(),s=g(),_=A(),u=l(!1),e=l(),d=l(null),f=m(()=>v(e.value.createdAt)),y=m(()=>v(e.value.expiresAt));k(async()=>{var o;const n=s.pendingInviteId;if(console.log(n),!n){u.value=!0;return}try{await s.fetchInviteInfo(n),e.value=s.getInvite,console.log(e.value),d.value=await _.getUserWithId((o=e.value)==null?void 0:o.creatorId)}catch{u.value=!0}});async function I(){try{await s.acceptInvite(e.value.id),p.push("/main")}catch(n){alert("Не удалось принять приглашение"),console.error(n)}}return(n,o)=>{var c;return r(),i("div",E,[e.value?(r(),i("div",N,[t("div",V,[t("div",b,[w(S,{avatar:e.value.community.avatar,name:e.value.community.name},null,8,["avatar","name"])]),t("div",U,[t("h2",null,a(e.value.community.name),1),e.value.community.description?(r(),i("p",j,a(e.value.community.description),1)):x("",!0)])]),t("div",D,[o[0]||(o[0]=t("span",null,"Creator",-1)),t("span",null,a((c=d.value)==null?void 0:c.nickname),1)]),t("div",F,[o[1]||(o[1]=t("span",null,"Created",-1)),t("span",null,a(f.value),1)]),t("div",J,[o[2]||(o[2]=t("span",null,"Expires",-1)),t("span",null,a(y.value),1)]),t("div",M,[o[3]||(o[3]=t("span",null,"Uses count",-1)),t("span",null,a(e.value.usesCount),1)]),t("button",{onClick:I},"Join the community")])):(r(),i("div",R," Failed to load invitation information "))])}}}),K=B(T,[["__scopeId","data-v-619e7bc8"]]);export{K as default};
